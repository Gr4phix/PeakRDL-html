<div>
<h1>GHC</h1>

<dl class="node-info">
    <dt>Absolute Address:</dt><dd id="_AbsAddr" class="address"></dd>
    <dt>Base Offset:</dt><dd class="address">0x4</dd>
</dl>
<h2>Description</h2>
<p>This register controls various global actions of the HBA.</p>

<h2>Contents</h2>
<table border="1">
    <tr>
        <th>Bits</th>
        <th>Identifier</th>
        <th>Access</th>
        <th>Reset</th>
        <th>Decoded</th>
        <th>Name</th>
        <th></th>
    </tr>
    <tr id="HR">
        <td>[0]</td>
        <td><a href="#HR.desc">HR</a></td>
        <td>rw</td>
        <td>0x0
        </td>
        <td>
            <input id="_FieldValueTester0" class="field-value-tester"
                type="text" autocomplete="off"
                data-idx="0" oninput="onDecodedFieldInput(this)"/>
        </td>
        <td>HBA Reset</td>
        <td>
            <button type="button" id="_RadixButton0" class="radix-button"
                title="Switch radix" aria-label="Switch radix"
                data-idx="0" onclick="onRadixSwitch(this)">H</button>
        </td>
    </tr>
    <tr id="IE">
        <td>[1]</td>
        <td><a href="#IE.desc">IE</a></td>
        <td>rw</td>
        <td>0x0
        </td>
        <td>
            <input id="_FieldValueTester1" class="field-value-tester"
                type="text" autocomplete="off"
                data-idx="1" oninput="onDecodedFieldInput(this)"/>
        </td>
        <td>Interrupt Enable</td>
        <td>
            <button type="button" id="_RadixButton1" class="radix-button"
                title="Switch radix" aria-label="Switch radix"
                data-idx="1" onclick="onRadixSwitch(this)">H</button>
        </td>
    </tr>
    <tr id="MRSM">
        <td>[2]</td>
        <td><a href="#MRSM.desc">MRSM</a></td>
        <td>r</td>
        <td>0x0
        </td>
        <td>
            <input id="_FieldValueTester2" class="field-value-tester"
                type="text" autocomplete="off"
                data-idx="2" oninput="onDecodedFieldInput(this)"/>
        </td>
        <td>MSI Revert to Single Message</td>
        <td>
            <button type="button" id="_RadixButton2" class="radix-button"
                title="Switch radix" aria-label="Switch radix"
                data-idx="2" onclick="onRadixSwitch(this)">H</button>
        </td>
    </tr>
    <tr id="AE">
        <td>[31]</td>
        <td><a href="#AE.desc">AE</a></td>
        <td>r</td>
        <td>0x1
        </td>
        <td>
            <input id="_FieldValueTester3" class="field-value-tester"
                type="text" autocomplete="off"
                data-idx="3" oninput="onDecodedFieldInput(this)"/>
        </td>
        <td>AHCI Enable</td>
        <td>
            <button type="button" id="_RadixButton3" class="radix-button"
                title="Switch radix" aria-label="Switch radix"
                data-idx="3" onclick="onRadixSwitch(this)">H</button>
        </td>
    </tr>
</table>
<p>
    <label>
        Encoded Register Value:
        <input id="_RegValueTester" type="text" autocomplete="off" oninput="onEncodedRegInput(this)"/>
        <button type="button" class="reset-button" title="Reset register values" aria-label="Reset register values" onclick="reset_field_inputs()"></button>
    </label>
</p>
<hr/><h2>Field Descriptions</h2>

<h3 id="HR.desc">HR - HBA Reset
    <a class="headerlink" href="#HR.desc" title="Permalink to this headline">¶</a>
</h3>
<p>When set by SW, this bit causes an internal reset of the HBA. All
state machines that relate to data transfers and queuing shall return to an idle
condition, and all ports shall be re-initialized via COMRESET (if staggered spin-up is
not supported).</p>
<p>If staggered spin-up is supported, then it is the responsibility of
software to spin-up each port after the reset has completed.
When the HBA has performed the reset action, it shall reset this bit to '0'.</p>
<p>A software write of '0' shall have no effect.
For a description on which bits are reset when this bit is set, see section 10.4.3.</p>

<h3 id="IE.desc">IE - Interrupt Enable
    <a class="headerlink" href="#IE.desc" title="Permalink to this headline">¶</a>
</h3>
<p>This global bit enables interrupts from the HBA. When cleared
(reset default), all interrupt sources from all ports are disabled. When set, interrupts are
enabled.</p>

<h3 id="MRSM.desc">MRSM - MSI Revert to Single Message
    <a class="headerlink" href="#MRSM.desc" title="Permalink to this headline">¶</a>
</h3>
<p>When set to '1' by hardware, indicates that
the HBA requested more than one MSI vector but has reverted to using the first vector
only.</p>
<p>When this bit is cleared to '0', the HBA has not reverted to single MSI mode (i.e.
hardware is already in single MSI mode, software has allocated the number of
messages requested, or hardware is sharing interrupt vectors if MC.MME &lt; MC.MMC).
The HBA may revert to single MSI mode when the number of vectors allocated by the
host is less than the number requested.</p>
<p>This bit shall only be set to '1' when the following conditions hold:</p>
<ul>
<li>MC.MSIE = '1' (MSI is enabled)</li>
<li>MC.MMC &gt; 0 (multiple messages requested)</li>
<li>MC.MME &gt; 0 (more than one message allocated)</li>
<li>MC.MME != MC.MMC (messages allocated not equal to number requested)</li>
</ul>
<p>When this bit is set to '1', single MSI mode operation is in use and software is
responsible for clearing bits in the IS register to clear interrupts.
This bit shall be cleared to '0' by hardware when any of the four conditions stated is
false. This bit is also cleared to '0' when MC.MSIE = '1' and MC.MME = 0h. In this
case, the hardware has been programmed to use single MSI mode, and is not
reverting to that mode.</p>

<h3 id="AE.desc">AE - AHCI Enable
    <a class="headerlink" href="#AE.desc" title="Permalink to this headline">¶</a>
</h3>
<p>When set, indicates that communication to the HBA shall be via
AHCI mechanisms. This can be used by an HBA that supports both legacy
mechanisms (such as SFF-8038i) and AHCI to know when the HBA is running under an
AHCI driver.</p>
<p>When set, software shall only communicate with the HBA using AHCI. When cleared,
software shall only communicate with the HBA using legacy mechanisms. When
cleared FISes are not posted to memory and no commands are sent via AHCI
mechanisms.</p>
<p>Software shall set this bit to '1' before accessing other AHCI registers.
The implementation of this bit is dependent upon the value of the CAP.SAM bit. If
CAP.SAM is '0', then GHC.AE shall be read-write and shall have a reset value of '0'. If
CAP.SAM is '1', then AE shall be read-only and shall have a reset value of '1'.</p>
</div>